== default ==
{
	executable("xD");
	optimization(0);
	debug_symbols(true);
	assert(true);
	add_build_file("./src/libpsybase/src.psy");
	static_if(_win32)
	{
		add_link_library("Kernel32.lib");
	}
};

thing : struct
{
	arr : u64[4];
};

main : func(args : program_args? -> s32)
{
	thingie ::= thing mut
	{
		.arr := u64[4]{};
	};
	thingie.arr = u64[4]{.0 := 0; .1 := 1; .2 := 2; .3 := 3;};
	arr2 : u64[4] mut;
	arr2 = u64[4]{.0 := 5; .1 := 6; .2 := 7; .3 := 8;};
	thingie.arr = arr2;
	// this breaks

	puts("hello, world!");
	putchar(10);
	source ::= embed("./test.psy");
	putsstr(sstr{.str := source.data@_; .len := source.len;});
	return 0;
};
