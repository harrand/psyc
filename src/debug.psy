dbg_begin ::= func(-> v0)
{
	if(!(prog.debug_symbols))
	{
		return;
	}
};

dbg_end ::= func(-> v0)
{
	if(!(prog.debug_symbols))
	{
		return;
	}
	static if(_win32)
	{
		dbg_setup_codeview();
	}
	LLVMDIBuilderFinalize(prog.db);
};

dbg_setup_codeview ::= func(-> v0)
{
	val_metadata ::= LLVMValueAsMetadata(LLVMConstInt(LLVMInt32Type(), 1, true@s32));
	codeview_str ::= "CodeView";
	LLVMAddModuleFlag(prog.cg, 0, codeview_str, zstrlen(codeview_str), val_metadata);
};
